<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Tuning Spamassassin</title>
    <meta name="description" content="">

    <link rel="stylesheet" href="/css/main.css">
    <link rel="canonical" href="http://localhost:4000/postfix/fedora/spam/spamassassin/2015/02/13/tuning-spamassassin.html">
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Drewskiwooskie Blogarooskie</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
          <a class="page-link" href="/archive.html">Archive</a>
          
        
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">Tuning Spamassassin</h1>
    <p class="post-meta">Feb 13, 2015</p>
  </header>

  <article class="post-content">
    <p>For those of us who are not large companies where paying another company for spam protection is an option, combatting spam
can be something both fun, and annoying. Hopefully, for any newbies, here are some things
to do that can greatly reduce the amount of spam you receive, as well as minimize
the amount of false positives of mail identified as spam.</p>

<h3> Have spamassassin learn ham and spam </h3>
<p>Many people I have seen just install spamassassin, run sa-update, then complain 
that they are getting a ton of spam. Spamassassin needs tuned, and tuning is quite
easy. The quick and easy way is with sa-learn.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">sa-learn <span class="nt">--ham</span> <span class="nt">--username</span><span class="o">=</span>vscan  <span class="nt">--nosync</span> /path/to/maildir/directory/cur
sa-learn <span class="nt">--sync</span>
sa-learn <span class="nt">--spam</span> <span class="nt">--nosync</span> <span class="nt">--username</span><span class="o">=</span>vscan /path/to/maildir/directory/.Junk/cur
sa-learn <span class="nt">--sync</span></code></pre></figure>

<p>You MUST train both ham and spam to be effective.  I have to use the vscan user, as I run amavis. sa-learn will add the bayesian 
tokens to the datbase of the user executing spamassassin.</p>

<p>A nice thing to do is to report mail that you have found to be spam. If you have installed the Razmor moudle, it can be reported to 
Vipulâ€™s Razor. Assuming in a folder that is full of spam:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="k">for </span>i <span class="k">in</span> <span class="sb">`</span><span class="nb">ls</span><span class="sb">`</span><span class="p">;</span> <span class="k">do </span>spamassassin <span class="nt">-r</span> &lt; <span class="nv">$i</span><span class="p">;</span> <span class="k">done</span></code></pre></figure>

<p><a href="http://wiki.apache.org/spamassassin/report_spam.pl">This</a> perl script can be run as a cron job. Just point it to a folder that contains only spam.</p>

<p>Ensuring you are doing sa-update frequently, as well as the above, will help spamassassin properly identify spam/ham. 
I am personally just tagging the subject, and putting anything with that tag in the subject into a folder that is
just spam, and running the above commands. This, in addition to running postscreen and a few select rbls, has slowed any spam making it
to my inbox to a trickle.</p>

<p>Excellent reference: <a href="http://www.spamtips.org/p/ultimate-setup-guide.html">http://www.spamtips.org/p/ultimate-setup-guide.html</a></p>


  </article>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Drewskiwooskie Blogarooskie</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <li>Drewskiwooskie Blogarooskie</li>
          <li><a href="mailto:"></a></li>
        </ul>
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
          

          
        </ul>
      </div>

      <div class="footer-col  footer-col-3">
        <p class="text"></p>
      </div>
    </div>

  </div>

</footer>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59814142-1', 'auto');
  ga('send', 'pageview');

</script>

  </body>

</html>
